<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast </title>
    <link rel="icon" type="image/png" href="css/sunrise-icon.png">
    <link rel = "stylesheet" href = "https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel = "stylesheet" href ="css/style.css" >
</head>
<body>
 
    <section id = "navbar">

        <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">Navbar</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                  <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#">Home</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                  </li>
                  <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                      Dropdown
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                      <li><a class="dropdown-item" href="#">Action</a></li>
                      <li><a class="dropdown-item" href="#">Another action</a></li>
                      <li><hr class="dropdown-divider"></li>
                      <li><a class="dropdown-item" href="#">Something else here</a></li>
                    </ul>
                  </li>
                </ul>
              </div>
            </div>
          </nav>

    </section>

    
    <section id = "main">

      <br> <br><br><br>

      <div>
      <form action='/' method="POST"  class="d-flex" style="margin-left: 30%;">
        <input class="form-control me-2" name="city" type="search" id="searchInput" placeholder="Search City" style="border-radius: 30px;width: 50%;">
        <button type="submit" class="btn btn-dark" id="searchButton" style="border-color: white;padding: 10px;">Find</button>
      </form>
    </div>

    <br><br><br>

    <div class="forecast">
        
      <div style="display: inline;">
      <p> <b style="font-size: 23px;">Today's Weather -  <span id = "location" style="width: fit-content;">{{city}}  </span> </p> </b>
          <hr>
       </div>


        <div class="seven-days">

          <div class="eachDay" >
            
            <div id="lessinfoForecast" style="display: flex;">
            <div class="left-align1">
            <p id= "Date" ></p> &nbsp; 

            <p id= "max-temprature">{{maxTemprature}}</p>°/<p id= "min-temprature">{{minTemprature}}</p>°&nbsp;

            <p id= "Sky">{{sky}} </p>
            </div>

            <div class= "right-align">
              <b> Humidity- </b> <p id="Humidity"> {{Humidity}} </p>% &nbsp; &nbsp;

              <img src = "css/wind-icon.png" style="height: 23px;width: 23px;"> <p id= "Wind-direction">{{windDirection}} </p> 

            <p id= "Wind-speed"> {{windSpeed}} </p>Km/hr &nbsp; &nbsp;
            </div>

            <i class="fa fa-chevron-down" id = "downIcon" style="cursor: pointer;color: blue;"></i> 
            </div>

            <div id="moreinfoForecast" style="display: none;">
              <i class="fa fa-chevron-up" id = "upIcon" style="cursor: pointer;color: blue;float: right;"></i> 

              <div style="display: flex;">

                <div class="left-align"> 
                  
                  <p id= "Date1" > </p> 
                  <div style="display: flex;">

                 <h4  style="font-size: 30px;"> <p id= "max-temprature1">{{maxTemprature}} </p>° / <p id= "min-temprature1">{{minTemprature}}</p>° </h4> &nbsp; &nbsp;

                  <p id= "Sky1" style="font-size: 20px;">{{sky}}</p> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; 

                  <div style="display: block;">
                  <b> Humidity- </b> <p id="Humidity1"> {{Humidity}}</p>% <br>

                    <div style="display: flex;">
                    
                      <img src = "css/wind-icon.png" style="height: 23px;width: 23px;"> <p id= "Wind-direction"> {{windDirection}} </p> &nbsp;

                      <p id= "Wind-speed1"> {{windSpeed}} </p> Km/hr
                    </div>
                  </div>

                  </div>

                  <div class = "table" style="border-radius: 5px; height: fit-content; border: 2px solid rgba(116, 115, 115, 0.466); width:fit-content;">

                    <div style="display: flex;">
                      &nbsp;&nbsp;&nbsp; 

                      <img src = "css/sunrise-icon.png" style="height: 30px;width: 40px;"><p id="Sunrise"> {{sunrise1}}  </p>&nbsp; &nbsp;&nbsp; &nbsp;

                      <img src = "css/sunset-icon.png" style="height: 30px;width: 40px;"><p id="Sunset"> {{sunset1}} </p> &nbsp; &nbsp;&nbsp; &nbsp;

                    </div>

                  </div>
                 
                </div>

                &nbsp;&nbsp;

                <!-- <div class= "right-align">

                  <p id= "Date" > Today</p> | Night

                  <div style="display: flex;">

                  <h4 id= "morning-temprature" style="font-size: 30px;"> 28°</h4>  &nbsp; &nbsp;

                  <p id= "Sky" style="font-size: 20px;"> Partly Cloudy</p> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp;  

                  <div style="display: block;">
                    <p id= "Rainfall"> <i class="fa fa-tint" style="color: blue;"></i>&nbsp;  2%</p> &nbsp; &nbsp; <br>

                    <div style="display: flex;">
                    
                      <p id= "Wind-direction"> <img src = "css/wind-icon.png" style="height: 23px;width: 23px;"> SSW</p> &nbsp;

                      <p id= "Wind-speed"> 11 Km/hr</p>
                    </div>
                  </div>

                  </div>

                  <div class = "table" style="border-radius: 5px; height: fit-content; border: 2px solid rgba(116, 115, 115, 0.466); width: 95%;">

                    <div style="display: flex;">
                      &nbsp;&nbsp;
                      <p id="Humidity"> <img src = "css/humidity-icon.png" style="height: 40px;width: 40px;"> 50%</p> &nbsp; &nbsp;

                      <p id="Sunrise"> <img src = "css/moonrise-icon.png" style="height: 40px;width: 40px;"> 02:23 </p>&nbsp; &nbsp;

                      <p id="Sunset"> <img src = "css/moonset-icon.png" style="height: 40px;width: 40px;"> 15:48 </p> &nbsp; &nbsp;

                    </div>

                  </div>

                </div> -->

              </div>

            </div>
         
          </div>
          <hr>    
          
        </div>
      
    </div>

    </section>



     <!-- newsletter Section -->
     <section class="newsletter-section" style="background-image: linear-gradient(to right,#302f31c0,#6a646ba2);">
      <br>
      <div class="container">
        <div class="row">
          <div class="col-md-8">
            <h2 class="mb-4">
              <a style="color: inherit; text-decoration: none;color: white;" href="">
                Enter Your Reviews Here  <i class="fa fa-arrow-right"></i> <!--Arrow icon will come-->
                  </a>  </h2>
    
                <div class="lead mb-2">
                  <a class="d-md-flex blog-link" style="text-decoration: none;">
                    <div style="white-space: nowrap;" class="mr-2">
                      <textarea  class = "response-text" rows="4" cols="40"></textarea> <br>
                      <button type="button" class="btn btn-primary" >Submit Your Response</button>
                    </div>
                     </a>  
                     </div>
                
          </div>

          
          <div class="col" id="subscribe">
      <h2 class="mb-4 mt-4 mt-md-0" style="color: white">
        Get Updates
      </h2>
      <p style="color: white">
        Sign up for our mailing list and we will let you know when we release new features or updates.
      </p>
      <div data-controller="newsletter" data-newsletter-hcaptcha-sitekey="51a23611-21cb-4c6e-bcbf-84ee5c14d9ad">
        <form data-action="submit->newsletter#submit" action="" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="✓"><input type="hidden" name="authenticity_token" value="TU3x/CKWIHfhN9eFk/oFm/5NKKqSTIj06CvOVTI/fh+q1RnobCSaIr/TeI4PbV7IZmf0Uq8rCnsq+0hhtEldmQ==">
          <div data-target="newsletter.formfields" style="width: 100%;">
            <div class="input-group">
              <input type="email" name="email" id="email" value="" data-target="newsletter.email" class="form-control" placeholder="Enter your email">
              <div class="input-group-append">
                <button class="btn btn-primary" data-target="newsletter.submitbtn">Subscribe</button>
              </div>
            </div>
          </div>
    
          <div data-target="newsletter.success" style="display: none;">
            <div class="alert alert-info" data-target="newsletter.successText"></div>
          </div>
    </form></div>
      <p style="font-size: 75%; opacity: 0.6;color: white;" class="mt-2">
        This form is protected by hCaptcha and its <a target="_blank" rel="noopener" class="font-weight-bold" style="color: inherit;" href="https://hcaptcha.com/privacy">Privacy Policy</a> and <a target="_blank" rel="noopener" class="font-weight-bold" style="color: inherit;" href="https://hcaptcha.com/terms">Terms of Service</a> apply.
    
      </p>
    </div>
    
        </div>
      </div>
      <br><br>
    </section>

     <!--Footer-->
   <section id = "footer" style="z-index: 10;background-color: white;margin-top: -1.5%;">
    <div class="container footer-row">
        <hr>
        <div class="footer-left-call">
            <div class = "footer-links">
                <div class = "link-title">
                <h4>PRODUCT</h4>
                <small>Our Plan</small><br>
                <small>Free Trial</small>
                </div>

                <div class = "link-title">
                    <h4>ABOUT US</h4>
                    <small>Request Demo</small><br>
                    <small>FAQs</small>
                    </div>

                 <div class = "link-title">
                   <h4>SUPPORT</h4>
                   <small>Features</small><br>
                   <small>Contact Us</small>
                   </div>

                 <div class = "link-title">
                     <h4>EXPLORE</h4>
                     <small>Find a non-profit</small><br>
                     <small>Corporate Solution</small>
                     </div>
            </div>
        </div>
        <div class="footer-right-call">
           <div class = "footer-info">
               <div class = "copyright-text" style="color: black;">
                   <small>support@verzeo.com</small><br>
                   <small>copyright 2021 Verzeo</small>
               </div>

               <div class = "footer-logo">
                   <img src = "css/verzeo-img.png">
                   <button class="btn btn-outline-dark" >English</button>
               </div>
           </div>
        </div>
        <hr style="height: 1px;">
    </div>
</section>    

<div class="lower py-5 text-center" style="background-color: rgba(0, 0, 0);">
  <div class="container" >
    <p>
      <img alt="remove.bg" style="max-width: 140px;" src="css/verzeo-img.png">
      <span class="mx-1 mx-md-2" style="color: white;">
        <span class="d-none d-md-inline">Made With ♥</span>
        BY VERZEO
      </span>
    <p class="mt-4 copyright-line"  style="color: white;">
      Copyright 2021 Verzeo - All rights reserved.
    </p>
    <p style="font-size: 70%;color: white;" class="mt-3">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
       quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum
        dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </p>
  </div>
</div>



    <script src = "https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js"></script>

    <script>

      document.getElementById("downIcon").onclick = function(){
        document.getElementById("lessinfoForecast").style.display = "none";
        document.getElementById("moreinfoForecast").style.display = "block";
      }

      document.getElementById("upIcon").onclick = function(){
        document.getElementById("lessinfoForecast").style.display = "flex";
        document.getElementById("moreinfoForecast").style.display = "none";
      }


      let maxTemprature = document.getElementById("max-temprature");
      let minTemprature = document.getElementById("min-temprature");

      let maxTemprature1 = document.getElementById("max-temprature1");
      let minTemprature1 = document.getElementById("min-temprature1");

      let sky = document.getElementById("Sky");
      let sky1 = document.getElementById("Sky1");

      let Humidity = document.getElementById("Humidity");
      let Humidity1 = document.getElementById("Humidity1");

      let windDirection = document.getElementById("Wind-direction");

      let windSpeed = document.getElementById("Wind-speed");
      let windSpeed1 = document.getElementById("Wind-speed1");

      let sunrise1 = document.getElementById("Sunrise");
      let sunset1 = document.getElementById("Sunset");


      var degToCard = function(deg){
  if (deg>11.25 && deg<=33.75){
    return "NNE";
  }else if (deg>33.75 && deg<=56.25){
    return "ENE";
  }else if (deg>56.25 && deg<=78.75){
    return "E";
  }else if (deg>78.75 && deg<=101.25){
    return "ESE";
  }else if (deg>101.25 && deg<=123.75){
    return "ESE";
  }else if (deg>123.75 && deg<=146.25){
    return "SE";
  }else if (deg>146.25 && deg<=168.75){
    return "SSE";
  }else if (deg>168.75 && deg<=191.25){
    return "S";
  }else if (deg>191.25 && deg<=213.75){
    return "SSW";
  }else if (deg>213.75 && deg<=236.25){
    return "SW";
  }else if (deg>236.25 && deg<=258.75){
    return "WSW";
  }else if (deg>258.75 && deg<=281.25){
    return "W";
  }else if (deg>281.25 && deg<=303.75){
    return "WNW";
  }else if (deg>303.75 && deg<=326.25){
    return "NW";
  }else if (deg>326.25 && deg<=348.75){
    return "NNW";
  }else{
    return "N"; 
  }
}


function msToHMS(s) {
    var currentTime = new Date();

var currentOffset = currentTime.getTimezoneOffset();

var ISTOffset = 330;   // IST offset UTC +5:30 
    var now = new Date(s*1000+(ISTOffset + currentOffset)*60000);
        let hours = now.getHours();
        let mins = now.getMinutes();
        let periods = "AM";

        if (hours > 11) {
          periods = "PM";
          if (hours > 12) hours -= 12;
        }
        if (mins < 10) {
          mins = "0" + mins;
        }
        
        return `${hours}:${mins}${periods}`;
  }

   //  Search Button

      const searchInput = document.getElementById("searchInput");
      const searchButton = document.getElementById("searchButton");

     

      const getWeather = async (city) =>{
        try{
          const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=887233809a61861b250933775626159a`,
              {mode: 'cors'} 
          );
          
          const weatherData = await response.json();

         //  console.log(weatherData);

           const{name} = weatherData;
           const{temp_max} = weatherData.main;
            const{temp_min} = weatherData.main;
            const{sunrise} = weatherData.sys;
            const{sunset} = weatherData.sys;
            const{description} = weatherData.weather[0];
            const{humidity} = weatherData.main;
            const{speed} = weatherData.wind;
            const{deg} = weatherData.wind;


            loc.innerHTML = name;
            maxTemprature.innerHTML = Math.round(temp_max-273);  maxTemprature1.innerHTML = Math.round(temp_max-273);
            minTemprature.innerHTML = Math.round(temp_min-273);  minTemprature1.innerHTML = Math.round(temp_min-273);
            sunrise1.innerHTML = msToHMS(sunrise);
            sunset1.innerHTML = msToHMS(sunset);
            sky.innerHTML = description;  sky1.innerHTML = description;
            Humidity.innerHTML = humidity; Humidity1.innerHTML = humidity;
            windSpeed.innerHTML = speed; windSpeed1.innerHTML = speed;
            windDirection.innerHTML = degToCard(deg);

        }catch{alert("City Not Found");}
      } 

  // Fetching Location        

  let loc = document.getElementById("location");

  window.addEventListener("load" ,()=>{
    let long; let lat;

    if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition((position)=>{
      long = position.coords.longitude;
      lat = position.coords.latitude;
      getLocation(lat,long);
    })

  }
  });

 

// date,time
      const getCurrentDay = () => {
        var weekday = new Array(7);
        weekday[0] = "Sun";
        weekday[1] = "Mon";
        weekday[2] = "Tue";
        weekday[3] = "Wed";
        weekday[4] = "Thur";
        weekday[5] = "Fri";
        weekday[6] = "Sat";

        let currentTime = new Date();
        let day = weekday[currentTime.getDay()];
        return day;
      };

      const getCurrentTime = () => {
        var months = [
          "Jan",
          "Feb",
          "Mar",
          "Apr",
          "May",
          "June",
          "July",
          "Aug",
          "Sept",
          "Oct",
          "Nov",
          "Dec",
        ];

        var now = new Date();
        var month = months[now.getMonth() + 1];
        var date = now.getDate();

        let hours = now.getHours();
        let mins = now.getMinutes();

        let periods = "AM";

        if (hours > 11) {
          periods = "PM";
          if (hours > 12) hours -= 12;
        }
        if (mins < 10) {
          mins = "0" + mins;
        }

        return `${month} ${date} | ${hours}:${mins}${periods}`;
      };
   
      document.getElementById('Date').innerHTML = getCurrentDay() + " | " + getCurrentTime();
      document.getElementById('Date1').innerHTML = getCurrentDay() + " | " + getCurrentTime();

       
      </script>
</body>
</html>




























